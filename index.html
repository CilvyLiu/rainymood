<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova's Pensieve</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: #000; overflow: hidden; color: white; font-family: serif; }

        #main-stage {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url("pensive.png") center center no-repeat;
            background-size: cover; z-index: 1;
            transition: background-image 1.5s ease-in-out;
        }

        /* ç»ç’ƒè’™ç‰ˆå±‚ï¼šå»æ‰æ¨¡ç³Šï¼Œæ”¹ç”¨åŠé€æ˜ï¼Œä¿è¯èƒŒæ™¯æ¸…æ™° */
        #glass-mask {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        /* é›¨æ»´å±‚ï¼šç¡®ä¿æ˜¯ä¸€é¢—é¢—æ¸…æ™°å¯è§çš„ */
        .rain {
            position: absolute; top: -100%; left: 0; width: 100%; height: 200%;
            background: url("stardust.png") repeat;
            pointer-events: none; z-index: 3;
            mix-blend-mode: plus-lighter; /* å¼ºåŠ›ç‚¹äº®é›¨æ»´ */
        }

        #rain-1 {
            background-size: 300px; /* åˆå§‹å¤§å° */
            opacity: 0.6;
            animation: drop-fall 3s linear infinite;
        }

        #rain-2 {
            background-size: 450px;
            opacity: 0.3;
            animation: drop-fall 5s linear infinite;
            filter: brightness(1.2); /* è®©å¤§é¢—é›¨ç‚¹æ›´äº® */
        }

        /* æ¨¡æ‹Ÿé‡åŠ›æ»šè½åŠ¨ç”» */
        @keyframes drop-fall {
            from { transform: translateY(-50%); }
            to { transform: translateY(0%); }
        }

        .content { position: relative; z-index: 10; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center; padding: 40px 20px; box-sizing: border-box; }
        
        .header h1 { letter-spacing: 12px; font-weight: 200; text-shadow: 0 0 20px rgba(0,0,0,1); }

        .nav-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; width: 100%; max-width: 600px; }
        @media (max-width: 600px) { .nav-grid { grid-template-columns: repeat(2, 1fr); } }

        /* åªåœ¨å¡ç‰‡ä¸Šä¿ç•™æ¨¡ç³Šï¼ŒèƒŒæ™¯ä¿æŒæ¸…æ™° */
        .nav-card { 
            background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(255, 255, 255, 0.2); 
            border-radius: 12px; padding: 15px; text-align: center; text-decoration: none; 
            color: white; backdrop-filter: blur(10px); transition: 0.3s; 
        }

        .controls-panel { 
            background: rgba(0, 0, 0, 0.8); padding: 20px; border-radius: 30px; 
            border: 1px solid rgba(255,255,255,0.3); display: flex; flex-direction: column; 
            gap: 15px; width: 90%; max-width: 400px; 
        }

        .sliders { display: flex; justify-content: space-around; align-items: center; width: 100%; }
        .sliders span { font-size: 14px; }
        input[type=range] { width: 80px; accent-color: #fff; cursor: pointer; }
        button { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
    </style>
</head>
<body onclick="autoPlay()">

    <div id="main-stage">
        <div id="glass-mask"></div>
        <div id="rain-1" class="rain"></div>
        <div id="rain-2" class="rain"></div>
    </div>

    <div class="content">
        <div class="header">
            <h1>THE PENSIEVE</h1>
            <p id="clock" style="opacity: 0.8; font-size: 12px; margin-top: 10px;"></p>
        </div>

        <div class="nav-grid">
            <a href="https://gringott.streamlit.app/" target="_blank" class="nav-card">ğŸ¦<br>å¤çµé˜</a>
            <a href="https://wwskygazer.streamlit.app/" target="_blank" class="nav-card">ğŸ¾<br>å—…å—…æ¢æµ‹</a>
            <a href="https://newscil.streamlit.app/" target="_blank" class="nav-card">ğŸ“œ<br>é¢„è¨€æ—¥æŠ¥</a>
            <a href="https://skygazer111.streamlit.app/" target="_blank" class="nav-card">ğŸ”®<br>æˆ˜ç•¥çœ‹æ¿</a>
        </div>

        <div class="controls-panel">
            <div class="sliders">
                <span>ğŸ”Š <input type="range" id="vol" min="0" max="1" step="0.1" value="0.5" oninput="sync()"></span>
                <span>ğŸŒ§ï¸ <input type="range" id="rain-size" min="50" max="600" step="10" value="300" oninput="sync()"></span>
                <button id="pbtn" onclick="toggle(event)">PLAY</button>
            </div>
            <div style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                <button onclick="change('pensive.png')">1</button>
                <button onclick="change('train.png')">2</button>
                <button onclick="change('window.png')">3</button>
                <button onclick="change('beach.png')">4</button>
                <button onclick="change('mountain.png')">5</button>
            </div>
        </div>
    </div>

    <audio id="audio" loop src="0.m4a"></audio>

    <script>
        const audio = document.getElementById('audio');
        const stage = document.getElementById('main-stage');
        const pbtn = document.getElementById('pbtn');
        const r1 = document.getElementById('rain-1');
        const r2 = document.getElementById('rain-2');

        function change(img) { stage.style.backgroundImage = "url('" + img + "')"; }
        
        function sync() {
            // éŸ³é‡è°ƒèŠ‚
            audio.volume = document.getElementById('vol').value;
            
            // é›¨æ»´å¤§å°è°ƒèŠ‚
            const size = document.getElementById('rain-size').value;
            r1.style.backgroundSize = size + "px";
            r2.style.backgroundSize = (size * 1.5) + "px"; // ç¬¬äºŒå±‚å§‹ç»ˆå¤§ä¸€ç‚¹ï¼Œäº§ç”Ÿé”™è½æ„Ÿ
            
            // é€æ˜åº¦éšå¤§å°å¾®è°ƒï¼Œå¤§é›¨æ»´æ›´æ¸…æ™°
            r1.style.opacity = (size / 600) * 0.8;
            r2.style.opacity = (size / 600) * 0.5;
        }

        function autoPlay() { if(audio.paused) { audio.play().then(() => pbtn.innerText = "STOP").catch(e => {}); } }

        function toggle(e) {
            e.stopPropagation();
            if(audio.paused) { audio.play(); pbtn.innerText = "STOP"; }
            else { audio.pause(); pbtn.innerText = "PLAY"; }
        }

        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleString(); }, 1000);
        window.onload = () => { sync(); };
    </script>
</body>
</html>
