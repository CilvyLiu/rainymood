<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova's Pensieve</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: black; color: white; overflow: hidden; font-family: serif; }
        
        #bg-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            transition: all 1.5s ease-in-out;
            background-repeat: no-repeat;
            background-position: center;
            z-index: -3;
        }

        #mask {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            transition: all 1.5s ease-in-out;
            z-index: -2;
        }

        /* ä½¿ç”¨ä½ ä¸Šä¼ çš„ stardust.png ä½œä¸ºé›¨ç‚¹æ»¤é•œ */
        #rain-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("stardust.png");
            opacity: 0.3;
            pointer-events: none;
            z-index: -1;
        }

        .container {
            display: flex; flex-direction: column; align-items: center;
            justify-content: space-between; height: 100vh; padding: 40px 0;
            box-sizing: border-box; z-index: 10; position: relative;
        }

        .header h2 { letter-spacing: 10px; opacity: 0.7; margin: 0; }
        .header p { color: #555; font-size: 12px; margin-top: 5px; }

        .nav-grid {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 20px; width: 90%; max-width: 900px;
        }
        .nav-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px; padding: 20px;
            text-align: center; text-decoration: none; color: white;
            backdrop-filter: blur(10px); transition: 0.4s;
        }
        .nav-card:hover { border-color: #00d4ff; transform: translateY(-5px); background: rgba(0, 212, 255, 0.1); }

        .audio-controls {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 25px; border-radius: 40px;
            display: flex; align-items: center; gap: 20px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
        }
        .slider-group { display: flex; align-items: center; gap: 10px; }
        input[type=range] { cursor: pointer; accent-color: #00d4ff; }

        .scene-switcher { display: flex; gap: 10px; margin-top: 20px; }
        button {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2);
            color: white; padding: 8px 15px; border-radius: 20px; cursor: pointer; transition: 0.3s;
        }
        button:hover { background: rgba(0,212,255,0.2); border-color: #00d4ff; }
    </style>
</head>
<body onclick="initAudio()">

    <div id="bg-layer"></div>
    <div id="mask"></div>
    <div id="rain-overlay"></div>

    <div class="container">
        <div class="header" style="text-align: center;">
            <h2>THE PENSIEVE</h2>
            <p id="clock"></p>
        </div>

        <div class="nav-grid">
            <a href="https://gringott.streamlit.app/" target="_blank" class="nav-card"><h2>ğŸ¦</h2><div style="font-size:14px;">å¤çµé˜</div></a>
            <a href="https://wwskygazer.streamlit.app/" target="_blank" class="nav-card"><h2>ğŸ¾</h2><div style="font-size:14px;">å—…å—…æ¢æµ‹</div></a>
            <a href="https://newscil.streamlit.app/" target="_blank" class="nav-card"><h2>ğŸ“œ</h2><div style="font-size:14px;">é¢„è¨€æ—¥æŠ¥</div></a>
            <a href="https://skygazer111.streamlit.app/" target="_blank" class="nav-card"><h2>ğŸ”®</h2><div style="font-size:14px;">æˆ˜ç•¥çœ‹æ¿</div></a>
        </div>

        <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
            <div class="audio-controls">
                <div class="slider-group">
                    <span>ğŸ”ŠéŸ³é‡</span>
                    <input type="range" id="volSlider" min="0" max="1" step="0.01" value="0.5" oninput="updateAudio()">
                </div>
                <div class="slider-group">
                    <span>ğŸŒ§ï¸é›¨ç‚¹</span>
                    <input type="range" id="rainSlider" min="0" max="1" step="0.01" value="0.3" oninput="updateRain()">
                </div>
                <button onclick="toggleAudio()" id="playBtn">ğŸ”‡ åœæ­¢æ’­æ”¾</button>
            </div>

            <div class="scene-switcher">
                <button onclick="setScene('pensive.png', '450px', 0.85)">ğŸº å†¥æƒ³ç›†</button>
                <button onclick="setScene('train.png', 'cover', 0.5)">ğŸš‚ ç«è½¦</button>
                <button onclick="setScene('window.png', 'cover', 0.5)">ğŸªŸ è½åœ°çª—</button>
                <button onclick="setScene('beach.png', 'cover', 0.5)">ğŸ–ï¸ æ²™æ»©</button>
                <button onclick="setScene('mountain.png', 'cover', 0.5)">â›°ï¸ å±±é¡¶</button>
            </div>
        </div>
    </div>

    <audio id="rainAudio" loop src="0.m4a"></audio>

    <script>
        const audio = document.getElementById('rainAudio');
        const bgLayer = document.getElementById('bg-layer');
        const mask = document.getElementById('mask');
        const rainOverlay = document.getElementById('rain-overlay');
        const volSlider = document.getElementById('volSlider');
        const rainSlider = document.getElementById('rainSlider');
        const playBtn = document.getElementById('playBtn');

        function setScene(img, size, brightness) {
            bgLayer.style.backgroundImage = `url('${img}')`;
            bgLayer.style.backgroundSize = size;
            mask.style.backgroundColor = `rgba(0, 0, 0, ${brightness})`;
        }

        function initAudio() {
            if (audio.paused) {
                audio.play().catch(e => {});
                playBtn.innerText = "ğŸ”Š æ­£åœ¨æ’­æ”¾";
            }
        }

        function updateAudio() { audio.volume = volSlider.value; }

        function toggleAudio(event) {
            if(event) event.stopPropagation(); // é˜²æ­¢å†’æ³¡è§¦å‘ body çš„ initAudio
            if (audio.paused) {
                audio.play();
                playBtn.innerText = "ğŸ”Š æ­£åœ¨æ’­æ”¾";
            } else {
                audio.pause();
                playBtn.innerText = "ğŸ”‡ å·²åœæ­¢";
            }
        }

        function updateRain() {
            rainOverlay.style.opacity = rainSlider.value;
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleString('zh-CN', {timeZone: 'Asia/Shanghai', hour12: false}) + " CST";
        }

        // åˆå§‹åŒ–åŠ è½½ä½ ä¸Šä¼ çš„ pensive.png
        setScene('pensive.png', '450px', 0.85);
        setInterval(updateClock, 1000);
        updateClock();
    </script>
</body>
</html>
