<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Nova's Pensieve</title>
    <style>
        /* æ ¸å¿ƒæ²‰æµ¸å¼å®¹å™¨ */
        #viewport {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            transition: background-image 1.2s ease-in-out;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
        }

        /* åŠ¨æ€é›¨é›¾å±‚ï¼šå åŠ åœ¨èƒŒæ™¯å›¾ä¹‹ä¸Š */
        #rain-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("stardust.png");
            background-repeat: repeat;
            background-size: 200px;
            opacity: 0.4;
            pointer-events: none;
            mix-blend-mode: screen; /* è®©é›¨ç‚¹æ›´äº® */
        }

        /* è’™ç‰ˆï¼šæ§åˆ¶æ•´ä½“é˜´éƒæ°›å›´ */
        #overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4);
            pointer-events: none;
        }

        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; color: white; font-family: "PingFang SC", "Hiragino Sans GB", serif; }

        .content { z-index: 10; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 40px 0; box-sizing: border-box; }

        /* å¯¼èˆªå¡ç‰‡ï¼šRainymood é£æ ¼çš„åŠé€æ˜æ„Ÿ */
        .nav-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; width: 90%; max-width: 800px; }
        .nav-card {
            background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px; padding: 15px; text-align: center; text-decoration: none; color: white;
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            transition: 0.3s;
        }
        .nav-card:hover { background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.5); }

        .bottom-panel { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; }
        .controls {
            background: rgba(0, 0, 0, 0.6); padding: 15px 30px; border-radius: 50px;
            display: flex; align-items: center; gap: 20px; border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        button { background: transparent; border: 1px solid rgba(255,255,255,0.5); color: white; padding: 8px 18px; border-radius: 20px; cursor: pointer; transition: 0.2s; }
        button:hover { background: white; color: black; }
        input[type=range] { accent-color: #fff; cursor: pointer; }
    </style>
</head>
<body onclick="initAudio()">

    <div id="viewport">
        <div id="overlay"></div>
        <div id="rain-layer"></div>

        <div class="content">
            <div style="text-align: center;">
                <h1 style="letter-spacing: 15px; font-weight: 200; margin-bottom: 5px;">THE PENSIEVE</h1>
                <div id="clock" style="font-size: 13px; opacity: 0.6; letter-spacing: 2px;"></div>
            </div>

            <div class="nav-grid">
                <a href="https://gringott.streamlit.app/" target="_blank" class="nav-card">ğŸ¦<br>å¤çµé˜</a>
                <a href="https://wwskygazer.streamlit.app/" target="_blank" class="nav-card">ğŸ¾<br>å—…å—…æ¢æµ‹</a>
                <a href="https://newscil.streamlit.app/" target="_blank" class="nav-card">ğŸ“œ<br>é¢„è¨€æ—¥æŠ¥</a>
                <a href="https://skygazer111.streamlit.app/" target="_blank" class="nav-card">ğŸ”®<br>æˆ˜ç•¥çœ‹æ¿</a>
            </div>

            <div class="bottom-panel">
                <div class="controls">
                    <span>ğŸ”Š <input type="range" id="v" min="0" max="1" step="0.1" value="0.5" oninput="sync()"></span>
                    <span>ğŸŒ§ï¸ <input type="range" id="r" min="0" max="1" step="0.1" value="0.4" oninput="sync()"></span>
                    <button id="pbtn" onclick="toggleAudio(event)">PLAY</button>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button onclick="setScene('pensive.png', '500px')">ğŸº å†¥æƒ³ç›†</button>
                    <button onclick="setScene('train.png', 'cover')">ğŸš‚ ç«è½¦</button>
                    <button onclick="setScene('window.png', 'cover')">ğŸªŸ è½åœ°çª—</button>
                    <button onclick="setScene('beach.png', 'cover')">ğŸ–ï¸ æ²™æ»©</button>
                    <button onclick="setScene('mountain.png', 'cover')">â›°ï¸ å±±é¡¶</button>
                </div>
            </div>
        </div>
    </div>

    <audio id="audio" loop src="0.m4a"></audio>

    <script>
        const audio = document.getElementById('audio');
        const viewport = document.getElementById('viewport');
        const rain = document.getElementById('rain-layer');
        const pbtn = document.getElementById('pbtn');

        function setScene(img, size) {
            console.log("Setting scene to:", img);
            // è§£å†³å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥çš„ç»ˆæåŠæ³•ï¼šç›´æ¥æ“ä½œ style
            viewport.style.backgroundImage = "url('" + img + "')";
            viewport.style.backgroundSize = size;
        }

        function sync() {
            audio.volume = document.getElementById('v').value;
            rain.style.opacity = document.getElementById('r').value;
        }

        function initAudio() {
            if(audio.paused) {
                audio.play();
                pbtn.innerText = "STOP";
            }
        }

        function toggleAudio(e) {
            e.stopPropagation();
            if(audio.paused) { audio.play(); pbtn.innerText = "STOP"; }
            else { audio.pause(); pbtn.innerText = "PLAY"; }
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('zh-CN', {hour12: false});
        }

        window.onload = () => {
            // åˆå§‹åŒ–èƒŒæ™¯
            setScene('pensive.png', '500px');
            setInterval(updateClock, 1000);
            updateClock();
        };
    </script>
</body>
</html>
