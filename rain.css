/* Nova's Pensieve - Optimized UI System */
body, html {
    margin: 0; padding: 0; width: 100%; height: 100%;
    overflow: hidden; background: #000;
    font-family: "STSong", "Songti SC", "Source Han Serif SC", serif;
}

/* 核心背景与覆盖 */
#container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1; }
#container canvas { display: block; width: 100vw; height: 100vh; image-rendering: -webkit-optimize-contrast; }
#overlay {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 2; pointer-events: none;
    background: radial-gradient(circle at center, transparent 40%, rgba(0,0,0,0.4) 100%);
}

/* UI 容器 */
.side-nav, .center-container, .bottom-bar { position: fixed; z-index: 100; pointer-events: auto; }

/* 侧边导航 */
.side-nav { left: 20px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 20px; }
.nav-item {
    font-size: 24px; text-decoration: none; background: rgba(255,255,255,0.05); padding: 12px;
    border-radius: 50%; backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: 1px solid rgba(255,255,255,0.1);
}
.nav-item:hover { background: rgba(255,255,255,0.2); transform: scale(1.1) rotate(5deg); border-color: rgba(255,255,255,0.5); }

/* 中央纪律看板 */
.center-container { left: 50%; top: 45%; transform: translate(-50%, -50%); text-align: center; width: 85%; max-width: 480px; }

.rule-card {
    display: none; background: rgba(0,0,0,0.75); color: #fff; padding: 35px; border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.15); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    margin-bottom: 30px; text-align: left; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    animation: fadeInBlur 0.6s cubic-bezier(0.2, 0, 0.2, 1);
}

@keyframes fadeInBlur {
    from { opacity: 0; filter: blur(10px); transform: translateY(10px); }
    to { opacity: 1; filter: blur(0px); transform: translateY(0); }
}

.rule-card h2 {
    font-family: "STSong", "Songti SC", serif; font-size: 1.5rem; letter-spacing: 0.8em; text-indent: 0.8em;
    text-align: center; margin: 0 0 25px 0; font-weight: 500; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px;
}

/* 幽灵浮动注疏逻辑 */
.rule-item { margin-bottom: 28px; transition: all 0.4s ease; }
.rule-main {
    font-family: "STSong", serif; font-size: 1.15rem; color: #fff; letter-spacing: 0.15em;
    margin-bottom: 6px; border-left: 3px solid #7dd3fc; padding-left: 15px;
}
.rule-anno {
    padding-left: 18px; opacity: 0.35; transform: translateY(2px);
    transition: all 0.6s cubic-bezier(0.2, 1, 0.3, 1);
}
.rule-item:hover .rule-anno { opacity: 1; transform: translateY(0) translateX(5px); }

.rule-anno cite { display: block; font-size: 0.85rem; color: rgba(255,255,255,0.5); font-style: italic; margin-bottom: 6px; }
.rule-anno p { font-family: sans-serif; font-size: 0.8rem !important; line-height: 1.7 !important; margin: 5px 0 !important; color: rgba(255,255,255,0.75) !important; font-weight: 300; }
.rule-anno span { color: #7dd3fc; font-size: 0.65rem; border: 1px solid rgba(125,211,252,0.4); padding: 0px 5px; margin-right: 8px; border-radius: 2px; letter-spacing: 1px; }

/* 按钮与底部栏 */
.magic-btn {
    background: rgba(255,255,255,0.05); color: rgba(255,255,255,0.6); border: 1px solid rgba(255,255,255,0.2);
    padding: 12px 30px; letter-spacing: 4px; cursor: pointer; transition: 0.4s; border-radius: 30px; font-size: 0.8rem;
}
.magic-btn:hover { color: #fff; border-color: #fff; background: rgba(255,255,255,0.15); }

.bottom-bar {
    bottom: 0; left: 0; width: 100%; height: 85px; display: flex; align-items: center; justify-content: center; gap: 30px; color: #fff;
    background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
}
#clock { font-family: "Courier New", monospace; font-size: 20px; font-weight: bold; min-width: 110px; }
input[type="range"] { accent-color: #fff; cursor: pointer; width: 100px; opacity: 0.7; }
select { background: rgba(20,20,20,0.85); color: #fff; border: 1px solid rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 4px; font-size: 13px; }
#pbtn { background: rgba(255,255,255,0.1); border: 1px solid #fff; color: #fff; border-radius: 50%; width: 38px; height: 38px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
#pbtn:hover { background: #fff; color: #000; transform: scale(1.1); }
::-webkit-scrollbar { display: none; }
